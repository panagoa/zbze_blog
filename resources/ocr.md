# Проект по обработке изображений и OCR

- [ ] оформить репозиторий
- [ ] написать мини статью про обучение Tesseract новому языку (Кабардинский)

## Пример результата
https://disk.yandex.ru/client/disk/ocr_present

## Предобработка изображений
### Хранилище результатов
- Результаты обработки хранятся в папке `image_processing_results` на Яндекс.Диске.

### Шаги обработки
1. **Разделение PDF на JPEG**: Преобразование каждой страницы исходного PDF в отдельные JPEG файлы.
2. **Разделение макета страницы**: Использование `open_cv` для разделения страницы по черной линии в центре изображения.
3. **Поворот изображений**: Автоматическое корректирование ориентации изображений.
4. **Сглаживание изображений**: Улучшение качества изображений.
5. **Применение фильтров**: Регулировка `Contrast`, `Brightness`, `Sharpness`. *Возможность экспериментировать с параметрами*.

### Текущее состояние
- Скрипты готовы, но пайплайн еще не интегрирован в Airflow. Запуск производится через Make.

## Обучение Tesseract
### Хранилище примеров обучения
- Примеры текста для обучения модели находятся в `train_data_input_example` на Яндекс.Диске.

### Методика обучения
1. **Сбор текста**:
    - Парсинг текста с `adyghepsale_ru`.
    - Парсинг PDF файлов журнала "Iуашхьэмахуэ".
2. **Выборка для обучения**:
    - Использование частотности токенов и их искусственное увеличение.
    - Выборка слов с сложными сочетаниями букв (`ПI`, `ТI`, `щI` и т.д.).
    - Выборка популярных сочетаний слов (`нэхърэ нэхъ`, `сыт хуэдэ` и т.д.).
    - Итеративное добавление слов, где модель чаще ошибается, и повторное обучение.
    - Добавление и обучение на новых шрифтах.

## OCR процессинг
### Хранилище результатов распознавания
- Результаты OCR обработки хранятся в папке `ocr_processing_result` на Яндекс.Диске.

### Подходы к распознаванию
- Обработка через `tesseract-ocr` по обученной модели кабардинского языка.
- Использование синтетических данных и добавление словаря ~500k слов и форм на кабардинском.
- Экспорт результатов в форматы `txt`, `csv` и `hOcr`.

### Возможные улучшения
- Анализ слов, отсутствующих в словаре, и расширение словаря.
- Улучшение набора данных для обучения из "реального мира".

## Задачи на доработку
### Скриншоты для демонстрации
- Скриншоты находятся в папке `screenshots` на Яндекс.Диске.

### Текущие задачи
- Сравнение качества распознавания с разными фильтрами изображения.
- Разработка метрик оценки качества распознавания.
- Реализация спеллчекера и автокоррекции.
- Разработка веб-сервиса для загрузки, обработки и редактирования OCR-результатов.